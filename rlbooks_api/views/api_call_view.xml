<odoo>
  <data>
    <!-- explicit list view definition -->    
    <record model="ir.ui.view" id="api_call_tree">
      <field name="name">api.call.list</field>
      <field name="model">api.call</field>
      <field name="arch" type="xml">
        <list string="API" sample="1" create="0" edit="0">
          <field name="action" optional="show" />
          <field name="type" optional="show" />
          <field name="record_count" optional="show" />
          <field name="called_url" optional="hide" />
          <field name="create_date" optional="show" />
          <field name="status_code" optional="show" />
          <field name="company_id" optional="hide"/>        
        </list>
      </field>
    </record>

    <!-- explicit form view definition -->
    <record model="ir.ui.view" id="api_call_form">
      <field name="name">api.call.form</field>
      <field name="model">api.call</field>
      <field name="arch" type="xml">
        <form string="API call">
          <header>
            <button name="action_view_record" string="View record" type="object" class="oe_highlight" invisible="not res_model or not res_id"/>
          </header>
          <sheet>
            <notebook>
              <page name="details_tab" string="Details">
                <group>
                  <group>
                    <field name="action" readonly="1"/>
                    <field name="type" readonly="1"/>
                    <field name="record_count" readonly="1"/>
                    <field name="called_url" readonly="1"/>
                    <field name="status_code" readonly="1"/>                    
                  </group>
                  <group>
                    <field name="res_model"/>
                    <field name="res_id"/>                    
                    <field name="create_date" readonly="1"/>                    
                    <field name="company_id" readonly="1"/>
                  </group>
                </group>                
              </page>
              <page name="response_tab" string="Response">
                <field name="value" widget="text" readonly="1"/>
              </page>
              <page name="request_tab" string="Request">
                <field name="headers" widget="text" readonly="1"/>
                <field name="params" widget="text" readonly="1"/>
                <field name="body" widget="text" readonly="1"/>
              </page>
            </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <record model="ir.ui.view" id="api_call_select">
      <field name="name">api.call.select</field>
      <field name="model">api.call</field>
      <field name="arch" type="xml">
        <search string="Search">        
          <field name="action" filter_domain="[('action', 'ilike', self)]"/>
                    
          <separator/>
          <filter string="Archived" name="inactive" domain="[('active', '=', False)]"/>
          <filter string="Active" name="active" domain="[('active', '=', True)]"/>

          <separator/>
          <group expand="0" name="group_by" string="Group By">
            <filter name="action" string="Action" domain="[]" context="{'group_by' : 'action'}"/>
            <filter name="type" string="Type" domain="[]" context="{'group_by' : 'type'}"/>
            <filter name="status_code" string="Status code" domain="[]" context="{'group_by' : 'status_code'}"/>            
            <filter name="create_date" string="Created date" domain="[]" context="{'group_by' : 'create_date'}"/>
          </group>
        </search>
      </field>
    </record>
    
    <!-- actions opening views on models -->    
    <record model="ir.actions.act_window" id="api_call_action_window">
      <field name="name">API calls</field>
      <field name="res_model">api.call</field>
      <field name="view_mode">list,form</field>
    </record>

    <!-- Top menu item -->    
    <menuitem 
        name="API" 
        id="api_menu_root" 
        sequence="1"
        web_icon="rlbooks_api,static/description/icon.png"
        groups="base.user_admin"
    >        
      <menuitem name="Calls" id="api_call_menu" action="api_call_action_window" sequence="10"/>        
    </menuitem>
  </data>
</odoo>